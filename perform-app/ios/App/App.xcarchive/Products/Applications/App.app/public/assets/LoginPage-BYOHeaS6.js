import{_ as B}from"./logo_perform-E0kv-Mi-.js";import{d as L,r,o as P,c as h,e as y,w as t,f as a,g as o,u as e,l as v,k as d,S as I,v as x,x as V,E as O,z as M,t as z,I as F,h as j,F as A,s as D,i as H,N as J,O as T}from"./index-BSc-WbhD.js";import{g as W,h as X}from"./index-QnzCfbxr.js";import{u as q}from"./useErrorHandler-eomL11xx.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";const b=u=>(J("data-v-faf8990d"),u=u(),T(),u),K=b(()=>o("div",{class:"logo_perform_login"},[o("img",{style:{width:"250px"},src:B,alt:"logo perform"})],-1)),Q={class:"login_inputs"},R={style:{"padding-left":"50px","padding-right":"50px",width:"50%","padding-bottom":"30px","border-radius":"25px","box-shadow":"0px 0px 10px 5px lightgray"}},U=b(()=>o("h1",null,"CONNEXION",-1)),Y={class:"input-div"},Z={class:"input-div"},$={class:"input-div"},ee={class:"input-div",style:{display:"flex","justify-content":"center"}},oe=L({__name:"LoginPage",setup(u){const{triggerError:m}=q(),l=r(!1),c=r(""),p=r(""),i=r(!1),f=r(!1);P(async()=>{});const w=()=>{f.value=!f.value},C=()=>{_()&&document.body.classList.add("keyboard-open")},E=()=>{_()&&document.body.classList.remove("keyboard-open")},N=()=>{i.value=!0;const n={body:{email:p.value,password:c.value}};try{A("/login/",n,!1).then(s=>{l.value=!1,s.status>301?(m("Erreur de connexion"),l.value=!0,i.value=!1):D.set("user",JSON.stringify(s)).then(()=>{p.value="",c.value="",i.value=!1,H.push("/home")})})}catch(s){m(s)}},k=n=>{p.value=n.target.value},S=n=>{c.value=n.target.value},_=()=>/Mobi|Android/i.test(navigator.userAgent);return(n,s)=>(h(),y(e(j),{"data-page":"Login",class:"home-ion-page"},{default:t(()=>[a(e(F),{id:"login-home-page",style:{"align-content":"center","justify-content":"center",display:"flex"}},{default:t(()=>[K,o("div",Q,[o("div",R,[U,o("form",null,[o("div",Y,[a(e(v),null,{default:t(()=>[d("Email : ")]),_:1}),a(e(I),{class:x(["login-input",l.value?"errorInput":""]),fill:"outline",slot:"end",id:"email-input",placeholder:"force@gmail.com",inputmode:"email",onIonFocus:C,onIonBlur:E,shape:"round",onIonInput:s[0]||(s[0]=g=>k(g)),value:p.value},null,8,["class","value"])]),o("div",Z,[a(e(v),null,{default:t(()=>[d("Mot de passe : ")]),_:1}),a(e(I),{class:x(["login-input",l.value?"errorInput":""]),fill:"outline",slot:"start",placeholder:"****",type:f.value?"text":"password",shape:"round",onIonInput:s[1]||(s[1]=g=>S(g)),value:c.value},{default:t(()=>[a(e(V),{icon:f.value?e(X):e(W),slot:"end",onClick:w,class:"password-toggle-icon"},null,8,["icon"])]),_:1},8,["class","type","value"]),a(e(v),{id:"forgot-password"},{default:t(()=>[d("Mot de passe oubliÃ© ?")]),_:1})]),o("div",$,[l.value?(h(),y(e(v),{key:0,class:"error_label"},{default:t(()=>[d("Email ou mot de passe incorrect")]),_:1})):O("",!0)]),o("div",ee,[a(e(M),{disabled:i.value,style:{"margin-top":"10px"},size:"small",onClick:N},{default:t(()=>[d(z(i.value?"Connexion ... ":"Se connecter"),1)]),_:1},8,["disabled"])])])])])]),_:1})]),_:1}))}}),ie=G(oe,[["__scopeId","data-v-faf8990d"]]);export{ie as default};
