import{d as z,V as J,W as O,r as u,n as Y,o as G,s as K,c as S,e as Q,w as d,f as o,g as s,k as i,t as C,u as n,l as _,v as c,S as f,U as X,j,J as R,K as U,m as W,I as Z,h as ee,G as ae,p as te,N as le,O as se}from"./index-BSc-WbhD.js";import{_ as L}from"./NavButton-BzcajF2k.js";/* empty css              */import{u as oe}from"./useErrorHandler-eomL11xx.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-QnzCfbxr.js";/* empty css                                                  */const ue=h=>(le("data-v-a0c92e16"),h=h(),se(),h),ie={class:"perform-page"},re={style:{display:"flex","justify-content":"space-between"}},de={style:{color:"black","margin-top":"5px","margin-bottom":"10px"}},ce=ue(()=>s("br",null,null,-1)),ve={class:"input_injurie"},pe={class:"input_injurie"},me={class:"input_injurie"},_e={class:"time-input"},ge={class:"input_injurie"},fe={class:"range-labels"},he={class:"range_inner"},ke={class:"input_injurie"},ye={class:"range-labels"},be={class:"range_inner"},xe=z({__name:"EditWorkoutPage",setup(h){const{triggerError:$}=oe(),M=J(),N=O(),b=u(5),x=u(5),r=u(!1),v=u(""),p=u(""),m=u(""),E=u({user:{id:0}}),g=u(""),a=u({id:0,name:"",date:g.value,workout_description:"",cognitive_rpe:b.value,physical_rpe:x.value,time_value:"",user:0}),V=u(!1),F=()=>{a.value.user=E.value.user.id,a.value.date=new Date(g.value);const l=T(B.value);a.value.time_value=l,ae("/workout/"+a.value.id+"/",{body:a.value},!0).then(t=>{t.status>300?$(t.data):N.push("/workout_show/"+a.value.id)})},k=()=>v.value!==""||p.value!=""||m.value!="",T=l=>{const[t,e,y]=l.split(":").map(I=>I.padStart(2,"0"));return`00 ${t}:${e}:${y}`},B=Y(()=>`${v.value}:${p.value}:${m.value}`),q=l=>{l.target.id==="cognitive"?(b.value=l.detail.value,a.value.cognitive_rpe=l.detail.value):(x.value=l.detail.value,a.value.physical_rpe=l.detail.value)},w=(l,t)=>{let e=t;switch(l){case"name":e[0]?a.value.name=e[0].toUpperCase()+e.slice(1):a.value.name=e;break;case"description":a.value.workout_description=e;break;case"date":g.value=e;break;case"cogntive":a.value.cognitive_rpe=e;break;case"physical":a.value.physical_rpe=e;break;case"time":a.value.time_value=e;break}},A=()=>{const l=new Date(a.value.date),t=l.getFullYear(),e=String(l.getMonth()+1).padStart(2,"0");return`${String(l.getDate()).padStart(2,"0")}-${e}-${t}`},H=()=>{te("/workout/"+M.params.id,{body:{}},!0).then(l=>{if(l.status>300)$("Erreur à la récupération de l'entrainement");else{a.value=l;const t=a.value.date,e=new Date(t),y=e.getFullYear(),D=String(e.getMonth()+1).padStart(2,"0"),I=String(e.getDate()).padStart(2,"0"),P=`${y}-${D}-${I}`;g.value=P,a.value.date=P,v.value=a.value.time_value.split(":")[0],p.value=a.value.time_value.split(":")[1],m.value=a.value.time_value.split(":")[2]}})};return G(async()=>{a.value.name="",a.value.workout_description="",b.value=5,x.value=5,v.value="",p.value="",m.value="";const l=await K.get("user");E.value=JSON.parse(l),V.value=!1,H()}),(l,t)=>(S(),Q(n(ee),{"data-page":"EditWorkout"},{default:d(()=>[o(n(Z),null,{default:d(()=>[s("div",ie,[s("div",re,[o(L,{url:"profile",text:"Retour",back:"back"})]),s("h1",de,[i(" Créer votre séance pour le "),ce,i(C(A()),1)]),s("div",ve,[o(n(_),{position:"stacked",class:c(r.value&&a.value.name==""?"required_text":"")},{default:d(()=>[i("Nom de la séance")]),_:1},8,["class"]),o(n(f),{class:c(r.value&&a.value.name==""?"required_class":""),type:"text","label-placement":"stacked",fill:"outline",placeholder:"Séance VMA",value:a.value.name,onIonChange:t[0]||(t[0]=e=>w("name",e.detail.value))},null,8,["class","value"])]),s("div",pe,[o(n(_),{position:"stacked"},{default:d(()=>[i("Description de la séance")]),_:1}),o(n(X),{value:a.value.workout_description,variant:"outlined",placeholder:"Décrivez votre séance",onIonChange:t[1]||(t[1]=e=>w("description",e.detail.value)),rows:4},null,8,["value"])]),s("div",me,[o(n(_),{position:"stacked",class:c(r.value&&a.value.date==""?"required_text":"")},{default:d(()=>[i("Date")]),_:1},8,["class"]),o(n(f),{class:c(r.value&&a.value.date==""?"required_class":""),type:"date",value:a.value.date,"label-placement":"stacked",fill:"outline",default:g.value,placeholder:"12/03/2023",onIonChange:t[2]||(t[2]=e=>w("date",e.detail.value))},null,8,["class","value","default"])]),s("div",null,[o(n(_),{position:"stacked",class:c(r.value&&!k()?"required_text":"")},{default:d(()=>[i("Temps (en hh:mm:ss)")]),_:1},8,["class"]),s("div",_e,[o(n(f),{modelValue:v.value,"onUpdate:modelValue":t[3]||(t[3]=e=>v.value=e),"aria-label":"hours",type:"number",labelPlacement:void 0,placeholder:"HH",maxLength:"2",class:c(["time_input",r.value&&!k()?"required_class":""]),max:23,min:0,style:{"padding-inline-start":"0px","--padding-end":"0px"}},null,8,["modelValue","class"]),i(": "),o(n(f),{modelValue:p.value,"onUpdate:modelValue":t[4]||(t[4]=e=>p.value=e),type:"number",placeholder:"MM","aria-label":"minutes",labelPlacement:void 0,maxLength:"2",class:c(["time_input",r.value&&!k()?"required_class":""]),max:59,min:0},null,8,["modelValue","class"]),i(": "),o(n(f),{modelValue:m.value,"onUpdate:modelValue":t[5]||(t[5]=e=>m.value=e),type:"number",placeholder:"SS","aria-label":"secondes",labelPlacement:void 0,maxLength:"2",class:c(["time_input",r.value&&!k()?"required_class":""]),max:59,min:0},null,8,["modelValue","class"])])]),s("div",null,[s("div",ge,[o(n(_),{position:"stacked"},{default:d(()=>[i("RPE Cognitif")]),_:1}),s("div",fe,[(S(),j(U,null,R(10,e=>s("div",{key:e,class:"range-label"},C(e),1)),64))]),s("div",he,[o(n(W),{modelValue:a.value.cognitive_rpe,"onUpdate:modelValue":t[6]||(t[6]=e=>a.value.cognitive_rpe=e),"aria-label":"Difficulté",ticks:!0,snaps:!0,min:1,max:10,class:"difficulty-slider",onIonChange:q,id:"cognitive"},null,8,["modelValue"])])]),s("div",ke,[o(n(_),{position:"stacked"},{default:d(()=>[i("RPE Physique")]),_:1}),s("div",ye,[(S(),j(U,null,R(10,e=>s("div",{key:e,class:"range-label"},C(e),1)),64))]),s("div",be,[o(n(W),{modelValue:a.value.physical_rpe,"onUpdate:modelValue":t[7]||(t[7]=e=>a.value.physical_rpe=e),"aria-label":"Difficulté",id:"phsyical",ticks:!0,snaps:!0,min:1,max:10,onIonChange:q,class:"difficulty-slider"},null,8,["modelValue"])])])]),s("div",null,[o(L,{style:{width:"100%",height:"40px","margin-top":"20px"},onClick:F,disabled:V.value,text:V.value?"Ajout en cours":"Modifier la séance",noIcon:!0},null,8,["disabled","text"])])])]),_:1})]),_:1}))}}),Ee=ne(xe,[["__scopeId","data-v-a0c92e16"]]);export{Ee as default};
