import{d as N,r as d,o as R,c as S,e as V,w as i,f as t,g as n,u as s,l as g,v as m,k as h,S as x,x as I,I as q,h as z,s as B,G as L,i as O,N as $,O as M}from"./index-BSc-WbhD.js";import{g as y,h as P}from"./index-QnzCfbxr.js";import{_ as b}from"./NavButton-BzcajF2k.js";/* empty css              */import{u as j}from"./useErrorHandler-eomL11xx.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                  */const G=c=>($("data-v-2d20d6ab"),c=c(),M(),c),H={class:"perform-page"},J={style:{display:"flex","justify-content":"space-between"}},T=G(()=>n("h1",{style:{color:"black","margin-top":"15px","margin-bottom":"10px"}}," Modifier mon mot de passe ",-1)),U={class:"edit_profile_div"},W={class:"input-div"},D={style:{"margin-top":"15px"},class:"input-div"},F=N({__name:"EditPasswordPage",setup(c){const{triggerError:v}=j(),_=d(!1),l=d(!1),r=d(""),f=d(""),u=d(!1),p=d(!1),w=e=>{e=="showPassword"?u.value=!u.value:p.value=!p.value},k=e=>{(e!=null||e!=null)&&(r.value=e)},E=e=>{(e!=null||e!=null)&&(f.value=e)},C=async()=>{if(r.value!==""&&r.value==f.value){const e=await B.get("user"),a=JSON.parse(e);L("/users/"+a.user.id+"/set_password/",{body:{password:r.value}},!0).then(o=>{o.status>301?o.data.password?v(o.data.password):v("Erreur à la modification ré essayez"):(l.value=!1,O.push("profile"))})}else r.value==""?v("Le champ est vide"):v("Les mots de passes sont différents"),l.value=!0};return R(async()=>{r.value="",f.value="",u.value=!1,p.value=!1,l.value=!1}),(e,a)=>(S(),V(s(z),{"data-page":"edit-profile"},{default:i(()=>[t(s(q),null,{default:i(()=>[n("div",H,[n("div",J,[t(b,{url:"profile",text:"Retour",back:"back"})]),T,n("div",U,[n("form",null,[n("div",W,[t(s(g),{class:m(l.value?"required_text":"")},{default:i(()=>[h(" Mot de passe : ")]),_:1},8,["class"]),t(s(x),{type:u.value?"text":"password",class:m(["login-input",l.value?"required_class":""]),fill:"outline",slot:"end",placeholder:"Nouveau mot de passe (Inchangé si vide)",shape:"round",onIonInput:a[1]||(a[1]=o=>k(o.detail.value)),value:r.value},{default:i(()=>[t(s(I),{icon:u.value?s(P):s(y),slot:"end",onClick:a[0]||(a[0]=o=>w("showPassword")),class:"password-toggle-icon"},null,8,["icon"])]),_:1},8,["type","class","value"])]),n("div",D,[t(s(g),{class:m(l.value?"required_text":"")},{default:i(()=>[h("Répétez le mot de passe : ")]),_:1},8,["class"]),t(s(x),{class:m([l.value?"required_class":"","login-input"]),type:p.value?"text":"password",fill:"outline",slot:"end",placeholder:"Nouveau mot de passe (Inchangé si vide)",shape:"round",onIonInput:a[3]||(a[3]=o=>E(o.detail.value)),value:f.value},{default:i(()=>[t(s(I),{icon:p.value?s(P):s(y),slot:"end",onClick:a[2]||(a[2]=o=>w("showPasswordRepeat")),class:"password-toggle-icon"},null,8,["icon"])]),_:1},8,["class","type","value"])])]),t(b,{style:{"margin-bottom":"10px","margin-top":"40px",height:"35px"},text:_.value?"Enregistrement en cours..":"Enregistrer",noIcon:!0,onClick:C,disabled:_.value},null,8,["text","disabled"])])])]),_:1})]),_:1}))}}),ae=A(F,[["__scopeId","data-v-2d20d6ab"]]);export{ae as default};
